<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0f1419;
  color: #fff;
  padding: 20px;
  max-width: 600px;
  margin: 0 auto;
}
.test-box {
  background: #1a1f2e;
  border: 2px solid #60a5fa;
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
}
input {
  width: 100%;
  padding: 12px;
  background: #0f1419;
  border: 2px solid #60a5fa;
  border-radius: 8px;
  color: #fff;
  font-size: 16px;
  margin: 10px 0;
}
button {
  width: 100%;
  padding: 15px;
  background: #60a5fa;
  border: none;
  border-radius: 8px;
  color: #fff;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  margin: 10px 0;
}
button:active {
  background: #3b82f6;
}
.result {
  margin: 10px 0;
  padding: 10px;
  border-radius: 8px;
  font-family: monospace;
  font-size: 14px;
}
.success { background: #10b981; color: #fff; }
.error { background: #ef4444; color: #fff; }
.info { background: #3b82f6; color: #fff; }
</style>
</head>
<body>

<h1>üîß –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h1>

<div class="test-box">
  <h3>1. –í–≤–µ–¥–∏ IP –∞–¥—Ä–µ—Å –∏–∑ –æ–∫–Ω–∞ MC Controller</h3>
  <input type="text" id="ipInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 192.168.1.3:5000">
  <button onclick="testConnection()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
  <div id="result"></div>
</div>

<div class="test-box">
  <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h3>
  <p>1. –ó–∞–ø—É—Å—Ç–∏ mc_controller.py –Ω–∞ –ü–ö</p>
  <p>2. –°–∫–æ–ø–∏—Ä—É–π IP –∞–¥—Ä–µ—Å –∏–∑ –æ–∫–Ω–∞</p>
  <p>3. –í–≤–µ–¥–∏ –µ–≥–æ –≤—ã—à–µ –∏ –Ω–∞–∂–º–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"</p>
  <p>4. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - —Å–º–æ—Ç—Ä–∏ —Ä–µ—à–µ–Ω–∏—è –Ω–∏–∂–µ</p>
</div>

<div class="test-box">
  <h3>‚ùå –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:</h3>
  <p><strong>1. –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä Windows</strong></p>
  <p>‚Ä¢ –û—Ç–∫—Ä–æ–π "–ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä Windows"</p>
  <p>‚Ä¢ "–†–∞–∑—Ä–µ—à–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"</p>
  <p>‚Ä¢ –ù–∞–π–¥–∏ Python –∏ —Ä–∞–∑—Ä–µ—à–∏</p>
  
  <p><strong>2. –†–∞–∑–Ω—ã–µ —Å–µ—Ç–∏</strong></p>
  <p>‚Ä¢ –ü–ö –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º Wi-Fi</p>
  <p>‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –æ–±–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –æ–¥–Ω–æ–π —Å–µ—Ç–∏</p>
  
  <p><strong>3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP</strong></p>
  <p>‚Ä¢ –ù–∞ –ü–ö –æ—Ç–∫—Ä–æ–π CMD –∏ –≤–≤–µ–¥–∏: ipconfig</p>
  <p>‚Ä¢ –ù–∞–π–¥–∏ IPv4-–∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: 192.168.1.3)</p>
  <p>‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç IP —Å –ø–æ—Ä—Ç–æ–º :5000</p>
</div>

<script>
async function testConnection() {
  const ip = document.getElementById('ipInput').value.trim();
  const resultDiv = document.getElementById('result');
  
  if (!ip) {
    resultDiv.innerHTML = '<div class="error">–í–≤–µ–¥–∏ IP –∞–¥—Ä–µ—Å!</div>';
    return;
  }
  
  const server = ip.startsWith('http') ? ip : `http://${ip}`;
  
  resultDiv.innerHTML = '<div class="info">–ü–æ–¥–∫–ª—é—á–∞—é—Å—å...</div>';
  
  try {
    // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
    const response = await fetch(`${server}/status`, {
      method: 'GET',
      mode: 'cors'
    });
    
    if (response.ok) {
      const data = await response.json();
      resultDiv.innerHTML = `
        <div class="success">‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω!</div>
        <div class="info">–°—Ç–∞—Ç—É—Å: ${data.status}</div>
        <div class="info">–°–æ–æ–±—â–µ–Ω–∏–µ: ${data.message}</div>
        <div class="success">–ú–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç IP –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏!</div>
      `;
    } else {
      resultDiv.innerHTML = `
        <div class="error">‚ùå –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª —Å –æ—à–∏–±–∫–æ–π</div>
        <div class="info">–ö–æ–¥: ${response.status}</div>
      `;
    }
  } catch (error) {
    resultDiv.innerHTML = `
      <div class="error">‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</div>
      <div class="info">–û—à–∏–±–∫–∞: ${error.message}</div>
      <div class="info">
        <br>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
        <br>‚Ä¢ –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        <br>‚Ä¢ –ü–ö –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö
        <br>‚Ä¢ mc_controller.py –Ω–µ –∑–∞–ø—É—â–µ–Ω
        <br>‚Ä¢ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å
      </div>
    `;
  }
}

// –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–∑ localStorage
window.onload = () => {
  const savedIP = localStorage.getItem('serverIP');
  if (savedIP) {
    document.getElementById('ipInput').value = savedIP.replace('http://', '');
  }
};
</script>

</body>
</html>
